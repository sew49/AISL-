{% extends "base.html" %}

{% block title %}Staff Portal - Attendance System{% endblock %}

{% block content %}
<!-- Header -->
<header class="gradient-bg text-white py-4 px-4 shadow-lg sticky top-0 z-50">
    <div class="max-w-5xl mx-auto">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-2">
            <div>
                <h1 id="greeting" class="text-xl md:text-2xl font-bold">Welcome to Staff Portal</h1>
                <p class="text-blue-200 text-sm">Attendance Management System</p>
            </div>
            <div class="text-right">
                <p id="currentDate" class="text-lg font-semibold"></p>
                <p id="dayType" class="text-sm bg-white/20 px-3 py-1 rounded-full inline-block"></p>
            </div>
        </div>
    </div>
</header>

<main class="max-w-5xl mx-auto p-4">
    <!-- Welcome Message -->
    <section class="bg-white rounded-xl card-shadow p-4 md:p-6 mb-4">
        <h2 class="text-lg font-semibold text-gray-800 mb-2">Staff Attendance Portal</h2>
        <p class="text-gray-600">This is the local staff portal. Access this at <code class="bg-gray-100 px-2 py-1 rounded">/staff</code> when running locally.</p>
    </section>

    <!-- Info Cards -->
    <section class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-white rounded-xl card-shadow p-4">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                    <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <div>
                    <div class="text-2xl font-bold text-gray-800">Clock In</div>
                    <div class="text-gray-500 text-sm">Start your work day</div>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl card-shadow p-4">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                    <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                    </svg>
                </div>
                <div>
                    <div class="text-2xl font-bold text-gray-800">Leave Request</div>
                    <div class="text-gray-500 text-sm">Submit time off</div>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl card-shadow p-4">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                    <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <div>
                    <div class="text-2xl font-bold text-gray-800">View Status</div>
                    <div class="text-gray-500 text-sm">Today's attendance</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Environment Info -->
    <section class="bg-white rounded-xl card-shadow p-4 md:p-6 mt-4">
        <h3 class="font-semibold text-gray-800 mb-3">Environment Information</h3>
        <div class="grid grid-cols-2 gap-2 text-sm">
            <div class="text-gray-500">Mode:</div>
            <div class="text-gray-800 font-medium">Local (Staff)</div>
            <div class="text-gray-500">Access URL:</div>
            <div class="text-gray-800 font-medium">/staff</div>
            <div class="text-gray-500">Supabase:</div>
            <div class="text-gray-800 font-medium">Connected</div>
        </div>
    </section>
</main>

<script>
    // Set time-based greeting
    function setGreeting() {
        const now = new Date();
        const hour = now.getHours();
        let greeting = '';
        
        if (hour >= 5 && hour < 12) {
            greeting = 'Good morning, Welcome to Staff Portal';
        } else if (hour >= 12 && hour < 18) {
            greeting = 'Good afternoon, Welcome to Staff Portal';
        } else {
            greeting = 'Good evening, Welcome to Staff Portal';
        }
        
        document.getElementById('greeting').textContent = greeting;
    }

    // Set today's date and day type
    function setHeaderDate() {
        const now = new Date();
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', options);
        
        const dayOfWeek = now.getDay();
        const dayTypeEl = document.getElementById('dayType');
        
        if (dayOfWeek === 6) {
            dayTypeEl.textContent = 'Saturday (5hrs)';
        } else if (dayOfWeek === 0) {
            dayTypeEl.textContent = 'Sunday (No Work)';
        } else {
            dayTypeEl.textContent = 'Standard Day (8hrs)';
        }
    }

    // Initialize
    setGreeting();
    setHeaderDate();
</script>
{% endblock %}
